 :root {
            --bg-body: #f8f9fa;
            --bg-sidebar: #ffffff;
            --primary: #7c1225; 
            --primary-light: #fdf2f4; 
            --text-main: #333;
            --text-muted: #666;
            --border: #e9ecef;
            --card-radius: 12px;
            --shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        /* FLEX COLUMN para que el Header quede arriba y el resto abajo */
        body { 
            font-family: 'Inter', sans-serif; 
            margin: 0; 
            background-color: var(--bg-body); 
            color: var(--text-main); 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
            overflow: hidden; 
        }

        /* --- 1. HEADER SUPERIOR (NUEVO DISEÑO) --- */
        .main-header {
            height: 80px; /* Alto fijo de la barra */
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: space-between; /* Separa Izq, Centro, Der */
            padding: 0 30px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            z-index: 20;
            position: relative;
        }

        /* Lado Izquierdo: Logo */
        .header-left { display: flex; align-items: center; }
        .header-logo {
            width: 230px;
            height: 40px;
            object-fit: contain;
            background: white;
            border-radius: 10px;
            padding: 4px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* Centro: Título (Absoluto para que quede perfectamente centrado) */
        .header-center {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
        }
        .header-title { margin: 0; font-size: 1.4em; font-weight: 700; letter-spacing: 0.5px; }
        .header-subtitle { margin: 0; font-size: 0.85em; opacity: 0.8; font-weight: 300; }

        /* Derecha: Cerrar Sesión */
        .header-right { display: flex; align-items: center; }
        .btn-logout {
            color: white;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9em;
            padding: 8px 16px;
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 6px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .btn-logout:hover { background: rgba(255,255,255,0.1); border-color: white; }

        /* --- 2. CONTENEDOR PRINCIPAL (Abajo del Header) --- */
        .app-shell { 
            display: flex; 
            flex: 1; /* Ocupa el resto de la altura */
            overflow: hidden; 
        }
        
        /* SIDEBAR (Ahora solo lista) */
        .sidebar { 
            width: 300px; 
            background: var(--bg-sidebar); 
            border-right: 1px solid var(--border); 
            display: flex; 
            flex-direction: column; 
            z-index: 10; 
        }
        
        /* Botón Ver Global en Sidebar */
        .sidebar-actions { padding: 20px; border-bottom: 1px solid var(--border); background: #fcfcfc; }

        /* Busca esta clase en tu <style> y modifícala así: */

        .btn-ver-global { 
            background: white; 
            color: var(--primary); 
            border: 1px solid var(--border); 
            padding: 12px 20px; 
            border-radius: 8px; 
            cursor: pointer; 
            width: 100%; 
            font-weight: 600; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            transition: all 0.2s;
            display: flex; align-items: center; justify-content: center; gap: 8px;
        }
        .btn-ver-global:hover { background: var(--primary); color: white; border-color: var(--primary); }

        /* Lista de Usuarios */
        .user-list { flex: 1; overflow-y: auto; list-style: none; padding: 0; margin: 0; }
        .user-item { padding: 15px 20px; border-bottom: 1px solid var(--border); cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 15px; }
        .user-item:hover { background-color: #f8f9fa; }
        .user-item.active { background-color: var(--primary-light); border-left: 5px solid var(--primary); }
        
        .avatar-circle { width: 35px; height: 35px; border-radius: 50%; background: #e9ecef; color: #555; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 0.85em; flex-shrink: 0; }
        .user-item.active .avatar-circle { background: var(--primary); color: white; }
        
        .user-info { flex: 1; min-width: 0; }
        .user-name { display: block; font-weight: 600; font-size: 0.9em; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; color: #444; }
        .user-score { font-size: 0.75em; color: var(--text-muted); }

        /* MAIN CONTENT */
        .main-content { flex: 1; display: flex; flex-direction: column; overflow-y: auto; padding: 30px; position: relative; }

        /* --- VISTAS --- */
        .view-section { display: none; animation: fadeIn 0.4s ease; }
        .view-section.active { display: block; }

        /* Headers Dashboard */
        .dashboard-header { margin-bottom: 30px; display: flex; justify-content: space-between; align-items: end; border-bottom: 1px solid #eee; padding-bottom: 20px; }
        .dashboard-title { font-size: 1.8em; font-weight: 700; margin: 0; color: var(--text-main); }
        .dashboard-subtitle { color: var(--text-muted); margin: 5px 0 0; }

        /* KPIs */
        .kpi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .kpi-card { background: white; padding: 25px; border-radius: var(--card-radius); box-shadow: var(--shadow); border-top: 4px solid var(--primary); }
        .kpi-val { font-size: 2.2em; font-weight: 800; color: var(--text-main); display: block; }
        .kpi-label { color: var(--text-muted); font-size: 0.9em; text-transform: uppercase; letter-spacing: 0.5px; }

        /* Navegación Secciones */
        .sections-nav-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-top: 20px; }
        .section-nav-card { 
            background: white; padding: 20px; border-radius: var(--card-radius); box-shadow: var(--shadow); 
            cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; border: 1px solid transparent;
            display: flex; align-items: center; justify-content: space-between;
        }
        .section-nav-card:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0,0,0,0.08); border-color: var(--primary); }
        .section-icon { width: 40px; height: 40px; background: var(--primary-light); color: var(--primary); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .section-arrow { color: var(--text-muted); font-size: 1.2em; }

        /* Botón Volver */
        .btn-back { 
            background: white; border: 1px solid var(--border); padding: 8px 15px; border-radius: 8px; 
            cursor: pointer; display: flex; align-items: center; gap: 5px; color: var(--text-muted); font-weight: 600; box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .btn-back:hover { background: #f8f9fa; color: #333; }
        
        .global-badge { background: #333; color: white; padding: 5px 10px; border-radius: 20px; font-size: 0.75em; text-transform: uppercase; }

        /* Gráficas */
        .chart-card { background: white; padding: 25px; border-radius: var(--card-radius); box-shadow: var(--shadow); margin-bottom: 25px; }
        .chart-title-sm { font-size: 1em; color: #555; margin-bottom: 15px; font-weight: 600; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Responsive */
        @media (max-width: 900px) {
            .header-center { position: static; transform: none; text-align: left; }
            .main-header { padding: 15px; height: auto; flex-wrap: wrap; gap: 10px; }
            .sidebar { width: 250px; }
        }

        /* Título de la sección lateral */
        .sidebar-section-title {
            margin: 0 0 12px 0; /* Espacio debajo del título */
            font-size: 0.85em;    /* Tamaño discreto */
            color: #888;          /* Gris suave */
            text-transform: uppercase; /* Mayúsculas para elegancia */
            letter-spacing: 1px;  /* Espaciado entre letras */
            font-weight: 700;
        }

        /* 1. SEPARAR LA ETIQUETA (BADGE) */
        .global-badge {
            display: inline-block; /* Necesario para que el margen funcione */
            margin-bottom: 15px;   /* Espacio entre el Badge y el Título */
            
            /* Tus estilos anteriores */
            background: #333; 
            color: white; 
            padding: 6px 12px; 
            border-radius: 20px; 
            font-size: 0.75em; 
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        /* 2. SEPARAR EL TÍTULO */
        .dashboard-title {
            margin-bottom: 10px; /* Espacio entre el Título y el Subtítulo */
            
            /* Tus estilos anteriores */
            font-size: 1.8em; 
            font-weight: 700; 
            margin-top: 0; 
            color: var(--text-main);
            line-height: 1.2; /* Mejora la lectura */
        }

        /* 3. MEJORAR EL SUBTÍTULO */
        .dashboard-subtitle {
            margin-top: 0;
            line-height: 1.5; /* Más altura de línea para que se lea mejor */
            color: var(--text-muted);
            font-size: 1em;
        }

        /* --- PANTALLA DE BIENVENIDA --- */
#splashScreen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #ffffff; /* Fondo blanco limpio */
    z-index: 9999; /* Asegura que esté encima de todo */
    display: flex;
    align-items: center;
    justify-content: center;
    transition: opacity 0.8s ease-out, visibility 0.8s; /* Transición suave */
}

/* Cuando se oculte, añadiremos esta clase con JS */
#splashScreen.hidden {
    opacity: 0;
    visibility: hidden;
    pointer-events: none; /* Para que ya no se pueda clickear */
}

.splash-content {
    text-align: center;
    animation: fadeUp 1s ease-out; /* Pequeña animación de entrada */
}

.splash-logo {
    width: 150px;
    margin-bottom: 20px;
}

.splash-title {
    font-family: 'Inter', sans-serif;
    color: #7c1225; /* Tu color vino */
    font-size: 1.8em;
    margin: 0 0 10px 0;
}

.splash-content p {
    color: #666;
    font-family: 'Inter', sans-serif;
    margin-bottom: 30px;
}

/* CIRCULO DE CARGA (LOADER) */
.splash-loader {
    width: 40px;
    height: 40px;
    border: 4px solid #f3f3f3;
    border-top: 4px solid #7c1225; /* Color vino */
    border-radius: 50%;
    margin: 0 auto;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

@keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* PERSONALIZACIÓN DE CLUSTERS (Color Vino) */
    
    /* Círculo externo (transparente) */
    .marker-cluster-small, 
    .marker-cluster-medium, 
    .marker-cluster-large {
        background-color: rgba(124, 18, 37, 0.4) !important; /* Tu color vino al 40% */
    }

    /* Círculo interno (sólido) */
    .marker-cluster-small div, 
    .marker-cluster-medium div, 
    .marker-cluster-large div {
        background-color: #7c1225 !important; /* Tu color vino sólido */
        color: white !important; /* Número en blanco */
        font-weight: bold;
    }

    /* --- ESTILOS DEL BOTÓN CERRAR SESIÓN --- */
        .btn-logout {
            display: flex;           /* Alinea icono y texto */
            align-items: center;     /* Centra verticalmente */
            gap: 10px;               /* Espacio entre texto e icono */
            
            background-color: white; /* Fondo blanco limpio */
            color: #7c1225;          /* Texto color Vino */
            border: 2px solid #7c1225; /* Borde color Vino */
            
            padding: 8px 20px;       /* Tamaño cómodo */
            border-radius: 8px;      /* Bordes redondeados */
            
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease; /* Suaviza el hover */
        }

        .btn-logout:hover {
            background-color: #7c1225; /* Al pasar el mouse se vuelve Vino */
            color: white;              /* Texto blanco */
            transform: translateY(-2px); /* Efecto de elevación */
            box-shadow: 0 4px 8px rgba(124, 18, 37, 0.2); /* Sombra suave */
        }

        .btn-logout i {
            font-size: 1.1em; /* Icono un poco más grande */
        }